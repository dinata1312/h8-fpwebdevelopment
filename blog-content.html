<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Metadata and Bootstrap CSS -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Christian_Ardinata</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header Section -->
    <!-- Navbar Section -->
    <nav
      class="navbar navbar-expand-sm navbar-light bg-light"
      style="background-color: #f6f6f6"
    >
      <div class="container">
        <a class="navbar-brand" href="#">
          <img src="image\logo.png" alt="" height="24" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <!-- Navbar Links -->
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="portofolio.html">Portofolio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="blog.html">Blog</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about-us.html">About Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Contact</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="achievement.html">Achievement</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Header Section -->
    <!-- Body Section -->

    <div id="main-content" class="blog-page">
      <div class="container mt-2">
        <div class="card mt-3">
          <div class="card-body">
            <div class="img-post">
              <img
                class="d-block img-fluid"
                src="image/blog-image-1.jpg"
                alt="First slide"
                width="800"
              />
            </div>
            <h3>
              <a href="blog-content.html"
                >The Most Widespread Items in the Best Bike Spokes</a
              >
            </h3>
            <p>
              Lorem Ipsum is simply dummy text of the printing and typesetting
              industry. Lorem Ipsum has been the industry's standard dummy text
              ever since the 1500s, when an unknown printer took a galley of
              type and scrambled it to make a type specimen book. It has
              survived not only five centuries, but also the leap into
              electronic typesetting, remaining essentially unchanged. It was
              popularised in the 1960s with the release of Letraset sheets
              containing Lorem Ipsum passages, and more recently with desktop
              publishing software like Aldus PageMaker including versions of
              Lorem Ipsum.
            </p>
          </div>
        </div>
        <div class="card mt-3">
          <div class="card-header">
            <h2>Comments <span id="commentCount">0</span></h2>
          </div>
          <div class="card-body">
            <ul class="list-unstyled" id="commentsList">
              <!-- Comments will be dynamically added here -->
            </ul>
          </div>
        </div>
        <div class="card mt-3">
          <div class="card-header">
            <h2>
              Leave a reply
              <small
                >Your email address will not be published. Required fields are
                marked*</small
              >
            </h2>
          </div>
          <div class="card-body">
            <form id="commentForm" class="row">
              <div class="col-sm-6">
                <div class="mb-3">
                  <input
                    type="text"
                    id="nameInput"
                    class="form-control"
                    placeholder="Your Name"
                  />
                </div>
              </div>
              <div class="col-sm-6">
                <div class="mb-3">
                  <input
                    type="text"
                    id="emailInput"
                    class="form-control"
                    placeholder="Email Address"
                  />
                </div>
              </div>
              <div class="col-sm-12">
                <div class="mb-3">
                  <textarea
                    id="commentText"
                    rows="4"
                    class="form-control"
                    placeholder="Please type what you want..."
                  ></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                  SUBMIT
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- End Body Section -->
    <!-- Footer Section -->
    <footer class="bg-dark text-center text-lg-start text-white">
      <div class="container p-4">
        <div class="row">
          <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">About Us</h5>
            <p>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Libero
              delectus, voluptas nisi id perferendis, vitae facilis ex, numquam
              atque cumque obcaecati eum omnis minus? Aspernatur consectetur
              aperiam magnam animi sint.
            </p>
          </div>
          <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">Contact Us</h5>
            <ul class="list-unstyled mb-0">
              <li>
                <a href="#!" class="text-white">Email: info@example.com</a>
              </li>
              <li>
                <a href="#!" class="text-white">Phone: + 01 234 567 89</a>
              </li>
              <li>
                <a href="#!" class="text-white"
                  >Address: 123 Street, City, State 12345</a
                >
              </li>
            </ul>
          </div>
          <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">Follow Us</h5>
            <ul class="list-unstyled mb-0">
              <li>
                <a href="#!" class="text-white"
                  ><i class="bi bi-facebook"></i> Facebook</a
                >
              </li>
              <li>
                <a href="#!" class="text-white"
                  ><i class="bi bi-instagram"></i> Instagram</a
                >
              </li>
              <li>
                <a href="#!" class="text-white"
                  ><i class="bi bi-linkedin"></i> LinkedIn</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
      Copyright 2022 Christian Ardinata <br />
      All rights reserved.
    </div>
    <!-- Copyright -->
    <!-- End Footer Section -->
    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>

    <script>
      // Comment class to structure our data
      class Comment {
        constructor(name, email, text) {
          this.id = Date.now();
          this.name = name;
          this.email = email;
          this.text = text;
          this.date = new Date().toLocaleDateString();
        }
      }

      // Comment Manager class to handle CRUD operations
      class CommentManager {
        constructor() {
          this.comments = this.loadComments();
          this.initializeCommentsList();
          this.updateCommentCount();
          this.setupEventListeners();
          this.renderComments();
        }

        // Load comments from localStorage
        loadComments() {
          const saved = localStorage.getItem("blogComments");
          return saved ? JSON.parse(saved) : [];
        }

        // Save comments to localStorage
        saveComments() {
          localStorage.setItem("blogComments", JSON.stringify(this.comments));
          this.updateCommentCount();
        }

        // Add new comment
        addComment(name, email, text) {
          const comment = new Comment(name, email, text);
          this.comments.push(comment);
          this.saveComments();
          this.renderComment(comment);
          return comment;
        }

        // Edit existing comment
        editComment(id, newText) {
          const comment = this.comments.find((c) => c.id === id);
          if (comment) {
            comment.text = newText;
            this.saveComments();
            this.renderComments();
          }
        }

        // Delete comment
        deleteComment(id) {
          if (confirm("Are you sure you want to delete this comment?")) {
            this.comments = this.comments.filter((c) => c.id !== id);
            this.saveComments();
            const commentEl = document.querySelector(`li[data-id="${id}"]`);
            commentEl.remove();
          }
        }

        // Create HTML for a single comment
        createCommentHTML(comment) {
          return `<li class="row clearfix" data-id="${comment.id}">
            <div class="col-md-2 col-4">
              <img
                class="img-fluid img-thumbnail"
                src="https://bootdey.com/img/Content/avatar/avatar7.png"
                alt="Awesome Image"
              />
            </div>
            <div class="col-md-10 col-8">
              <div class="d-flex justify-content-between">
                <h5>${comment.name}</h5>
                <div class="comment-actions">
                  <button class="btn btn-sm btn-primary edit-btn" onclick="commentManager.startEdit(${comment.id})">Edit</button>
                  <button class="btn btn-sm btn-danger delete-btn" onclick="commentManager.deleteComment(${comment.id})">Delete</button>
                </div>
              </div>
              <p class="comment-text">${comment.text}</p>
              <div class="edit-form" id="edit-${comment.id}" style="display: none;">
                <textarea class="form-control mb-2">${comment.text}</textarea>
                <button class="btn btn-sm btn-success" onclick="commentManager.saveEdit(${comment.id})">Save</button>
                <button class="btn btn-sm btn-secondary" onclick="commentManager.cancelEdit(${comment.id})">Cancel</button>
              </div>
              <ul class="list-inline">
                <li><a href="javascript:void(0);">${comment.date}</a></li>
                <li><a href="javascript:void(0);">Reply</a></li>
              </ul>
            </div>
          </li>`;
        }

        // Render all comments
        renderComments() {
          const commentsList = document.getElementById("commentsList");
          if (commentsList) {
            const newCommentsHTML = this.comments
              .map((comment) => this.createCommentHTML(comment))
              .join("");

            // Preserve existing static comments and add new ones
            const staticComments =
              commentsList.querySelectorAll("li:not([data-id])");
            commentsList.innerHTML =
              Array.from(staticComments)
                .map((el) => el.outerHTML)
                .join("") + newCommentsHTML;

            this.updateCommentCount();
          }
        }

        // Render single comment
        renderComment(comment) {
          const commentsList = document.getElementById("commentsList");
          if (commentsList) {
            const commentHTML = this.createCommentHTML(comment);
            commentsList.insertAdjacentHTML("beforeend", commentHTML);
          }
        }

        // Update comment count
        updateCommentCount() {
          document.getElementById("commentCount").textContent =
            this.comments.length;
        }

        // Edit functionality
        startEdit(id) {
          const commentEl = document.querySelector(`li[data-id="${id}"]`);
          const editForm = commentEl.querySelector(".edit-form");
          const commentText = commentEl.querySelector(".comment-text");

          editForm.style.display = "block";
          commentText.style.display = "none";
        }

        saveEdit(id) {
          const commentEl = document.querySelector(`li[data-id="${id}"]`);
          const editForm = commentEl.querySelector(".edit-form");
          const commentText = commentEl.querySelector(".comment-text");
          const newText = editForm.querySelector("textarea").value;

          const comment = this.comments.find((c) => c.id === id);
          if (comment) {
            comment.text = newText;
            this.saveComments();
            commentText.textContent = newText;

            editForm.style.display = "none";
            commentText.style.display = "block";
          }
        }

        cancelEdit(id) {
          const commentEl = document.querySelector(`li[data-id="${id}"]`);
          const editForm = commentEl.querySelector(".edit-form");
          const commentText = commentEl.querySelector(".comment-text");

          editForm.style.display = "none";
          commentText.style.display = "block";
        }

        // Setup event listeners
        setupEventListeners() {
          const form = document.getElementById("commentForm");
          form.addEventListener("submit", (e) => {
            e.preventDefault();
            const name = document.getElementById("nameInput").value;
            const email = document.getElementById("emailInput").value;
            const text = document.getElementById("commentText").value;

            this.addComment(name, email, text);

            // Reset form
            form.reset();
          });
        }

        // Add this new method to initialize comments list
        initializeCommentsList() {
          const commentsList = document.getElementById("commentsList");
          if (commentsList) {
            commentsList.innerHTML = ""; // Clear initial static comments
          }
        }
      }

      // Initialize comment manager
      const commentManager = new CommentManager();
    </script>
  </body>
</html>
